{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesB/chat/chat.vue?1c2d","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesB/chat/chat.vue?f7be","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesB/chat/chat.vue?200d","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesB/chat/chat.vue?a6e8","uni-app:///pagesB/chat/chat.vue","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesB/chat/chat.vue?b859","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesB/chat/chat.vue?cf89"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isRobot","sessionId","lastChunkContent","animationBuffer","animationTimer","typingSpeed","messageIndex","isWaiting","isFinished","friendName","friendId","roomId","isAgent","previousPageLastMessageTime","scrollTop","pageNo","pageSize","count","isPlaying","voiceIcon","voiceInterval","currentPlayingVoiceMessageId","friend","socketTask","messages","onLoad","uni","onUnload","clearInterval","computed","methods","getSessionId","url","method","user_id","success","handleChunk","console","getAIResponse","question","session_id","stream","complete","togglePlay","clearVoiceInterval","navigateToPlan","navigateToSurvey","formatTime","showTime","scrollToBottom","setTimeout","query","select","boundingClientRect","exec","scrollToTop","sendMessage","type","to_friend_id","room_id","friend_name","user_name","is_mold","id","message","saveMessage","getRoomId","initChat","room_num","getChat","newTime","item","initSocket","fail","is_agent","is_me","content"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrFA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC4Ft1B;AACA;AACA;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACAC;IACA;IACA;IACA;IACA;IACA;IACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACAD;IACA;MACAE;MACA;IACA;EACA;EACAC,4BACA,qDACA;EACAC;IACAC;MAAA;MACA;QACAC;QACAC;QACAlC;UACAmC;QACA;QACAlC;QACAmC;UACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAC;MACA;MACA;MACA;MACA;MACA;QACA;UACA;YACA;YACA;YACA;YACA;YACA;UACA;YACAT;YACA;UACA;QACA;MACA;IACA;IACAU;MAAA;MACA;MACA;MACA;QACAN;QACAC;QACAlC;UACAwC;UACAC;UACAN;UACAO;QACA;QACAzC;QACAmC;UACA;UACA;YACA;cACAP;cACA;gBACAA;gBACA;cACA;cACA;cACA;cACA;gBACA;cACA;cACA;cACA;YACA;UACA;QACA;QACAc;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;UACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;YACA;UACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAhB;QACA;MACA;MACA;MACA;IACA;IACAiB;MACAnB;QACAM;MACA;IACA;IACAc;MACApB;QACAM;MACA;IACA;IACAe;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;QACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAC;QACA;UACA;UACAC,MACAC,wBACAC;YACA;UACA,GACAC;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACAtB;QACAuB;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;QACAC;QACAA;QACAA;MACA;QACAA;MACA;MACA;QAAAjE;MAAA;IACA;IACAkE;MACA;QACAjC;QACAC;QACAlC;QACAoC;MACA;IACA;IACA+B;MAAA;MACA;QACAlC;QACAjC;UACA2D;QACA;QACAvB;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAgC;MAAA;MACA;QACAnC;QACAC;QACAlC;UACAqE;UACAV;UACAD;QACA;QACAtB;UACA;YACA;YACA;YACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAkC;MAAA;MACA;QACArC;QACAC;QACAlC;UACAgB;UACAC;UACAoD;UACAV;UACAD;QACA;QACAtB;UACA;YACA;YACA;YACAgB,MACAC,wBACAC;cACAvC;YACA,GACAwC;YACA;YACA;cACA;gBACAgB;gBACAtB;cAAA,GACAuB;YAEA;YACArB;cACA;gBACA;gBACAC,MACAC,wBACAC;kBACA;gBACA,GACAC;cACA;YACA;UACA;QACA;MACA;IACA;IACAkB;MAAA;MACA;QACAxC;QACAG;UACAE;QACA;QACAoC;UACApC;QACA;MACA;MACA;QACA;UACAH;UACAuB;UACAE;UACAE;UACAa;QACA;QACA;UAAA3E;QAAA;MACA;MACA;QACA;QACA;UACA;YACA;cACAmC;cACAuB;cACAE;cACAE;cACAa;YACA;YACA;cAAA3E;YAAA;YACA;UACA;YACA;cAAA4E;YAAA;YACA;YACA;YACA;UACA;YACA;YACA;cAAAA;YAAA;YACA;cACA;cACA;cACA;gBACA/C;gBACA;cACA;cACA;cACA;cACA,sDACA7B;gBACA4E;gBACAD;gBACAd;gBACAF;gBACAxB;gBACA0C;cAAA,GACA;cACA;cACA;cACA;cACA;cACA;YACA;cACA;cACA;cACA;YACA;YAEA;QAAA;QAEAvC;MACA;MACA;QACAA;MACA;MACA;MACA;QACAA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjgBA;AAAA;AAAA;AAAA;AAAiiD,CAAgB,i6CAAG,EAAC,C;;;;;;;;;;;ACArjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesB/chat/chat.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesB/chat/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=7e774f28&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesB/chat/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=7e774f28&\"","var components\ntry {\n  components = {\n    Flexbox: function () {\n      return import(\n        /* webpackChunkName: \"components/Flexbox/Flexbox\" */ \"@/components/Flexbox/Flexbox.vue\"\n      )\n    },\n    Navbar: function () {\n      return import(\n        /* webpackChunkName: \"components/Navbar/Navbar\" */ \"@/components/Navbar/Navbar.vue\"\n      )\n    },\n    Typography: function () {\n      return import(\n        /* webpackChunkName: \"components/Typography/Typography\" */ \"@/components/Typography/Typography.vue\"\n      )\n    },\n    mpHtml: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/mp-html/components/mp-html/mp-html\" */ \"@/uni_modules/mp-html/components/mp-html/mp-html.vue\"\n      )\n    },\n    Icon: function () {\n      return import(\n        /* webpackChunkName: \"components/Icon/Icon\" */ \"@/components/Icon/Icon.vue\"\n      )\n    },\n    Tabbar: function () {\n      return import(\n        /* webpackChunkName: \"components/Tabbar/Tabbar\" */ \"@/components/Tabbar/Tabbar.vue\"\n      )\n    },\n    Login: function () {\n      return import(\n        /* webpackChunkName: \"components/Login/Login\" */ \"@/components/Login/Login.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.messages, function (message, index) {\n    var $orig = _vm.__get_orig(message)\n    var g0 =\n      !(message.is_mold === 1) &&\n      !(message.is_mold === 2) &&\n      !(message.is_mold === 3) &&\n      message.is_mold === 5\n        ? Math.floor(message.content.duration / 1000)\n        : null\n    return {\n      $orig: $orig,\n      g0: g0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","<template>\n\t<Flexbox direction=\"column\" className=\"chat-page\">\n\t\t<Navbar>\n\t\t\t<Flexbox align=\"left\" gap=\"6\" className=\"chat-title\">\n\t\t\t\t<image :src=\"friend.avatar\" class=\"chat-icon\"></image>\n\t\t\t\t<Typography fontSize=\"16\" :bold=\"600\">{{ friendName }}</Typography>\n\t\t\t</Flexbox>\n\t\t</Navbar>\n\t\t<Flexbox direction=\"column\" :style=\"{ height: `calc(100vh - ${(statusBarHeight + 44) * 2}rpx - 196rpx)` }\">\n\t\t\t<!-- \t<Flexbox align=\"justify\" className=\"strategy-container\">\n\t\t\t\t<Typography color=\"gray1\">为我定制的策略：</Typography>\n\t\t\t\t<Flexbox gap=\"24\">\n\t\t\t\t\t<Flexbox align=\"center\" gap=\"2\" @tap=\"navigateToPlan\">\n\t\t\t\t\t\t<image src=\"https://cdn.agiagi.cc/images/icon_scheme.png\" class=\"strategy-icon\"></image>\n\t\t\t\t\t\t<Flexbox>\n\t\t\t\t\t\t\t<Typography>方案(</Typography>\n\t\t\t\t\t\t\t<Typography color=\"primary\" :bold=\"true\">0</Typography>\n\t\t\t\t\t\t\t<Typography>)</Typography>\n\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t</Flexbox>\n\t\t\t\t\t<Flexbox align=\"center\" gap=\"2\" @tap=\"navigateToSurvey\">\n\t\t\t\t\t\t<image src=\"https://cdn.agiagi.cc/images/icon_scheme.png\" class=\"strategy-icon\"></image>\n\t\t\t\t\t\t<Flexbox>\n\t\t\t\t\t\t\t<Typography>评估(</Typography>\n\t\t\t\t\t\t\t<Typography color=\"primary\" :bold=\"true\">0</Typography>\n\t\t\t\t\t\t\t<Typography>)</Typography>\n\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t</Flexbox>\n\t\t\t\t</Flexbox>\n\t\t\t</Flexbox> -->\n\t\t\t<scroll-view :scroll-y=\"true\" :scroll-top=\"scrollTop\" :scroll-with-animation=\"true\" class=\"message-container\" @scrolltoupper=\"scrollToTop\">\n\t\t\t\t<view class=\"message-list\">\n\t\t\t\t\t<Flexbox direction=\"column\" className=\"message-item\" v-for=\"(message, index) in messages\" :key=\"message.id\">\n\t\t\t\t\t\t<Typography color=\"gray2\" fontSize=\"12\" className=\"message-time\" v-if=\"message.showTime\">{{ message.newTime }}</Typography>\n\t\t\t\t\t\t<Flexbox :direction=\"message.is_me ? 'reverse' : ''\" gap=\"8\">\n\t\t\t\t\t\t\t<image :src=\"message.is_me ? userInfo.headimg : friend.avatar\" class=\"user-avatar\"></image>\n\t\t\t\t\t\t\t<Flexbox direction=\"column\" gap=\"4\">\n\t\t\t\t\t\t\t\t<Typography color=\"gray2\" v-if=\"!message.is_me\">{{ friend.name }}</Typography>\n\t\t\t\t\t\t\t\t<view :class=\"['message-dialog', { friend: !message.is_me }]\" v-if=\"message.is_mold === 1\">\n\t\t\t\t\t\t\t\t\t<view :class=\"['message-content', { loading: isWaiting && !message.content }]\" v-if=\"isRobot\">\n\t\t\t\t\t\t\t\t\t\t<mp-html\n\t\t\t\t\t\t\t\t\t\t\t:content=\"message.content\"\n\t\t\t\t\t\t\t\t\t\t\t:markdown=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:highlight=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tcontainer-style=\"padding:0;line-height:initial;font-size:initial;white-space:pre-line;\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<Typography fontSize=\"16\" className=\"message-content\" v-else>\n\t\t\t\t\t\t\t\t\t\t<mp-html\n\t\t\t\t\t\t\t\t\t\t\t:content=\"message.content\"\n\t\t\t\t\t\t\t\t\t\t\t:markdown=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:highlight=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tcontainer-style=\"padding:0;line-height:initial;font-size:initial;white-space:pre-line;\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<image :src=\"message.content\" mode=\"widthFix\" class=\"message-image\" v-else-if=\"message.is_mold === 2\"></image>\n\t\t\t\t\t\t\t\t<video :src=\"message.content\" class=\"message-video\" v-else-if=\"message.is_mold === 3\"></video>\n\t\t\t\t\t\t\t\t<!-- 语音消息部分：根据当前是否为正在播放的消息，显示动画效果 -->\n\t\t\t\t\t\t\t\t<Flexbox gap=\"10\" className=\"message-dialog message-voice\" v-else-if=\"message.is_mold === 5\" @tap=\"togglePlay(message.content.url, message.id)\">\n\t\t\t\t\t\t\t\t\t<Typography>{{ Math.floor(message.content.duration / 1000) }}''</Typography>\n\t\t\t\t\t\t\t\t\t<Icon :src=\"currentPlayingVoiceMessageId === message.id ? voiceIcon : 'voice-3.png'\" size=\"20\"></Icon>\n\t\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t\t\t<Flexbox direction=\"column\" gap=\"12\" className=\"survey-message\" v-else-if=\"message.is_mold === 6\">\n\t\t\t\t\t\t\t\t\t<Flexbox direction=\"column\" gap=\"8\" className=\"full-width\">\n\t\t\t\t\t\t\t\t\t\t<Typography fontSize=\"16\">{{ message.content.name }}</Typography>\n\t\t\t\t\t\t\t\t\t\t<Flexbox gap=\"8\" className=\"full-width\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"survey-description\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography color=\"gray1\">[问答聊天]</Typography>\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography color=\"gray2\">{{ message.content.description }}</Typography>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<Flexbox className=\"survey-cover\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon src=\"survey.png\" width=\"57\" height=\"41\" />\n\t\t\t\t\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t\t\t\t<Flexbox align=\"left\" className=\"survey-type\">\n\t\t\t\t\t\t\t\t\t\t<Typography fontSize=\"12\" color=\"gray1\">{{ message.content.type }}</Typography>\n\t\t\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t\t</Flexbox>\n\t\t\t\t\t</Flexbox>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</Flexbox>\n\t\t<Tabbar :canChat=\"true\" :canSend=\"!isWaiting && isFinished\" from=\"chat\" @confirm=\"sendMessage\"></Tabbar>\n\t\t<Login></Login>\n\t</Flexbox>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { request } from '@/utils/request';\nimport { formatDate } from '@/utils/util';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tisRobot: false,\n\t\t\tsessionId: '',\n\t\t\tlastChunkContent: '',\n\t\t\tanimationBuffer: '',\n\t\t\tanimationTimer: null,\n\t\t\ttypingSpeed: 100,\n\t\t\tmessageIndex: 0, // 当前助手消息所在下标\n\t\t\tisWaiting: false, // 正在等待流数据\n\t\t\tisFinished: true, // 对话是否完成\n\t\t\tfriendName: '',\n\t\t\tfriendId: '',\n\t\t\troomId: '',\n\t\t\tisAgent: '',\n\t\t\tpreviousPageLastMessageTime: '',\n\t\t\tscrollTop: 0,\n\t\t\tpageNo: 1,\n\t\t\tpageSize: 20,\n\t\t\tcount: 0,\n\t\t\tisPlaying: false,\n\t\t\t// 初始状态下的 icon 修改为 voice-3.png\n\t\t\tvoiceIcon: 'voice-3.png',\n\t\t\tvoiceInterval: null, // 切换 icon 的定时器\n\t\t\tcurrentPlayingVoiceMessageId: null, // 当前正在播放的语音消息 id\n\t\t\tfriend: null,\n\t\t\tsocketTask: null,\n\t\t\tmessages: []\n\t\t};\n\t},\n\tonLoad(option) {\n\t\tuni.$on('chunkReceived', this.handleChunk);\n\t\tthis.friendName = decodeURIComponent(option.friendName);\n\t\tthis.friendId = option.friendId;\n\t\tthis.getRoomId(option.friendId);\n\t\tthis.getSessionId();\n\t\tthis.audio = uni.createInnerAudioContext();\n\t\tthis.audio.onEnded(() => {\n\t\t\tthis.clearVoiceInterval();\n\t\t\tthis.isPlaying = false;\n\t\t\tthis.currentPlayingVoiceMessageId = null;\n\t\t});\n\t},\n\tonUnload() {\n\t\t// 页面卸载时移除事件监听，并清除定时器防止内存泄漏\n\t\tuni.$off('chunkReceived', this.handleChunk);\n\t\tif (this.animationTimer) {\n\t\t\tclearInterval(this.animationTimer);\n\t\t\tthis.animationTimer = null;\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState(['userInfo', 'statusBarHeight'])\n\t},\n\tmethods: {\n\t\tgetSessionId() {\n\t\t\trequest({\n\t\t\t\turl: '/api/v1/chat/sessions',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tuser_id: this.userInfo.member_id.toString()\n\t\t\t\t},\n\t\t\t\tisRobot: true,\n\t\t\t\tsuccess: (result) => {\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tthis.sessionId = result.session_id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thandleChunk(chunk) {\n\t\t\tconsole.log('收到流式数据：', chunk);\n\t\t\tconst newContent = chunk.content.replace(/\\s*##\\d+\\$\\$/g, '');\n\t\t\tconst diff = newContent.slice(this.lastChunkContent.length);\n\t\t\tthis.lastChunkContent = newContent;\n\t\t\tthis.animationBuffer += diff;\n\t\t\tif (!this.animationTimer) {\n\t\t\t\tthis.animationTimer = setInterval(() => {\n\t\t\t\t\tif (this.animationBuffer.length > 0) {\n\t\t\t\t\t\t// 取出缓冲区第一个字符追加到助手消息中\n\t\t\t\t\t\tthis.messages[this.messageIndex].content += this.animationBuffer[0];\n\t\t\t\t\t\tthis.animationBuffer = this.animationBuffer.slice(1);\n\t\t\t\t\t\tthis.messages[this.messageIndex].content = this.messages[this.messageIndex].content;\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclearInterval(this.animationTimer);\n\t\t\t\t\t\tthis.animationTimer = null;\n\t\t\t\t\t}\n\t\t\t\t}, this.typingSpeed);\n\t\t\t}\n\t\t},\n\t\tgetAIResponse(question) {\n\t\t\tthis.isWaiting = true;\n\t\t\t// 发起流式请求，流数据会通过 uni.$emit('chunkReceived', parsed) 逐块返回\n\t\t\trequest({\n\t\t\t\turl: '/api/v1/chat/stream',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tquestion,\n\t\t\t\t\tsession_id: this.sessionId,\n\t\t\t\t\tuser_id: this.userInfo.member_id.toString(),\n\t\t\t\t\tstream: true\n\t\t\t\t},\n\t\t\t\tisRobot: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// 当流式请求结束时，启动定时器等待动画缓冲区清空\n\t\t\t\t\tconst checkBuffer = setInterval(() => {\n\t\t\t\t\t\tif (this.animationBuffer.length === 0) {\n\t\t\t\t\t\t\tclearInterval(checkBuffer);\n\t\t\t\t\t\t\tif (this.animationTimer) {\n\t\t\t\t\t\t\t\tclearInterval(this.animationTimer);\n\t\t\t\t\t\t\t\tthis.animationTimer = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.isWaiting = false;\n\t\t\t\t\t\t\tthis.isFinished = true;\n\t\t\t\t\t\t\tif (this.messages[this.messageIndex]) {\n\t\t\t\t\t\t\t\tthis.messages[this.messageIndex].time = formatDate(new Date().getTime(), 'YYYY-MM-DD hh:mm:ss');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.saveMessage(this.messages[this.messageIndex]);\n\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.typingSpeed);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.isWaiting = false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\ttogglePlay(src, msgId) {\n\t\t\t// 如果点击的语音消息正处于播放状态，则暂停播放\n\t\t\tif (this.currentPlayingVoiceMessageId === msgId && this.isPlaying) {\n\t\t\t\tthis.audio.pause();\n\t\t\t\tthis.clearVoiceInterval();\n\t\t\t\tthis.isPlaying = false;\n\t\t\t\tthis.currentPlayingVoiceMessageId = null;\n\t\t\t} else {\n\t\t\t\t// 如果已有其他语音在播放，先暂停它\n\t\t\t\tif (this.currentPlayingVoiceMessageId && this.isPlaying) {\n\t\t\t\t\tthis.audio.pause();\n\t\t\t\t\tthis.clearVoiceInterval();\n\t\t\t\t}\n\t\t\t\t// 播放当前语音消息\n\t\t\t\tthis.audio.src = src;\n\t\t\t\tthis.audio.play();\n\t\t\t\tthis.isPlaying = true;\n\t\t\t\tthis.currentPlayingVoiceMessageId = msgId;\n\t\t\t\t// 开始切换 icon，每300ms切换一次，循环顺序：voice-3 -> voice-1 -> voice-2 -> voice-3\n\t\t\t\tthis.voiceInterval = setInterval(() => {\n\t\t\t\t\tif (this.voiceIcon === 'voice-3.png') {\n\t\t\t\t\t\tthis.voiceIcon = 'voice-1.png';\n\t\t\t\t\t} else if (this.voiceIcon === 'voice-1.png') {\n\t\t\t\t\t\tthis.voiceIcon = 'voice-2.png';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.voiceIcon = 'voice-3.png';\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t},\n\t\tclearVoiceInterval() {\n\t\t\tif (this.voiceInterval) {\n\t\t\t\tclearInterval(this.voiceInterval);\n\t\t\t\tthis.voiceInterval = null;\n\t\t\t}\n\t\t\t// 重置 icon 为初始状态 voice-3.png\n\t\t\tthis.voiceIcon = 'voice-3.png';\n\t\t},\n\t\tnavigateToPlan() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pagesB/plan/plan'\n\t\t\t});\n\t\t},\n\t\tnavigateToSurvey() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pagesB/survey/survey'\n\t\t\t});\n\t\t},\n\t\tformatTime(time) {\n\t\t\tconst now = new Date();\n\t\t\tconst messageDate = new Date(time.replace(/-/g, '/'));\n\t\t\tconst diffInMilliseconds = now - messageDate;\n\t\t\tconst diffInDays = Math.floor(diffInMilliseconds / (1000 * 60 * 60 * 24));\n\t\t\tconst hours = String(messageDate.getHours()).padStart(2, '0');\n\t\t\tconst minutes = String(messageDate.getMinutes()).padStart(2, '0');\n\t\t\tif (diffInDays === 0) {\n\t\t\t\treturn `${hours}:${minutes}`;\n\t\t\t} else if (diffInDays === 1) {\n\t\t\t\treturn `昨天 ${hours}:${minutes}`;\n\t\t\t} else if (diffInDays <= 7) {\n\t\t\t\tconst weekdays = ['星期天', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\n\t\t\t\treturn `${weekdays[messageDate.getDay()]} ${hours}:${minutes}`;\n\t\t\t} else if (messageDate.getFullYear() === now.getFullYear()) {\n\t\t\t\treturn `${messageDate.getMonth() + 1}月${messageDate.getDate()}日 ${hours}:${minutes}`;\n\t\t\t} else {\n\t\t\t\treturn `${messageDate.getFullYear()}年${messageDate.getMonth() + 1}月${messageDate.getDate()}日 ${hours}:${minutes}`;\n\t\t\t}\n\t\t},\n\t\tshowTime(index) {\n\t\t\tconst message = this.messages[index];\n\t\t\tif (index === 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst previousMessage = this.messages[index - 1];\n\t\t\tconst currentTime = new Date(message.time.replace(/-/g, '/')).getTime();\n\t\t\tconst previousTime = new Date(previousMessage.time.replace(/-/g, '/')).getTime();\n\t\t\tconst timeDiff = Math.floor((currentTime - previousTime) / (1000 * 60));\n\t\t\treturn timeDiff >= 5;\n\t\t},\n\t\tscrollToBottom() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\n\t\t\t\t\tquery\n\t\t\t\t\t\t.select('.message-list')\n\t\t\t\t\t\t.boundingClientRect((data) => {\n\t\t\t\t\t\t\tthis.scrollTop = data.height;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.exec();\n\t\t\t\t});\n\t\t\t}, 100);\n\t\t},\n\t\tscrollToTop() {\n\t\t\tif (this.count > this.messages.length) {\n\t\t\t\tthis.pageNo++;\n\t\t\t\tthis.previousPageLastMessageTime = this.messages[this.messages.length - 1].time;\n\t\t\t\tthis.getChat();\n\t\t\t}\n\t\t},\n\t\tsendMessage(content, is_mold, duration) {\n\t\t\tlet message = {\n\t\t\t\tuser_id: this.userInfo.member_id,\n\t\t\t\ttype: 'say',\n\t\t\t\tto_friend_id: this.friend.user_id,\n\t\t\t\troom_id: this.roomId,\n\t\t\t\tfriend_name: this.friend.name,\n\t\t\t\tuser_name: this.userInfo.nickname,\n\t\t\t\tis_mold,\n\t\t\t\tid: this.friend.id\n\t\t\t};\n\t\t\tif (is_mold === 5) {\n\t\t\t\tmessage.content = {};\n\t\t\t\tmessage.content.url = content;\n\t\t\t\tmessage.content.duration = duration;\n\t\t\t} else {\n\t\t\t\tmessage.content = content;\n\t\t\t}\n\t\t\tthis.socketTask.send({ data: JSON.stringify(message) });\n\t\t},\n\t\tsaveMessage(data) {\n\t\t\trequest({\n\t\t\t\turl: '/api/chat/save_message',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata,\n\t\t\t\tsuccess: (res) => {}\n\t\t\t});\n\t\t},\n\t\tgetRoomId(to_friend_id) {\n\t\t\trequest({\n\t\t\t\turl: '/api/chat/get_room_id',\n\t\t\t\tdata: {\n\t\t\t\t\tto_friend_id\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.roomId = res.room_id;\n\t\t\t\t\t\tthis.initChat(res.room_id, to_friend_id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tinitChat(room_num, to_friend_id) {\n\t\t\trequest({\n\t\t\t\turl: '/api/chat/chat_index',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\troom_num,\n\t\t\t\t\tto_friend_id,\n\t\t\t\t\ttype: 'friend'\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.count = res.count;\n\t\t\t\t\t\tthis.isAgent = res.is_agent;\n\t\t\t\t\t\tthis.friend = res.to_friend;\n\t\t\t\t\t\tthis.getChat();\n\t\t\t\t\t\tthis.initSocket();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetChat() {\n\t\t\trequest({\n\t\t\t\turl: '/api/chat/chat_record',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tpageNo: this.pageNo,\n\t\t\t\t\tpageSize: this.pageSize,\n\t\t\t\t\troom_num: this.roomId,\n\t\t\t\t\tto_friend_id: this.friendId,\n\t\t\t\t\ttype: 'friend'\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tlet scrollTop = 0;\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\n\t\t\t\t\t\tquery\n\t\t\t\t\t\t\t.select('.message-list')\n\t\t\t\t\t\t\t.boundingClientRect((data) => {\n\t\t\t\t\t\t\t\tscrollTop = data.height;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.exec();\n\t\t\t\t\t\tthis.messages = [...res.data.reverse(), ...this.messages];\n\t\t\t\t\t\tthis.messages = this.messages.map((item, index) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tnewTime: this.formatTime(item.time),\n\t\t\t\t\t\t\t\tshowTime: this.showTime(index),\n\t\t\t\t\t\t\t\t...item\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\n\t\t\t\t\t\t\t\tquery\n\t\t\t\t\t\t\t\t\t.select('.message-list')\n\t\t\t\t\t\t\t\t\t.boundingClientRect((data) => {\n\t\t\t\t\t\t\t\t\t\tthis.scrollTop = data.height - scrollTop;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.exec();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tinitSocket() {\n\t\t\tthis.socketTask = uni.connectSocket({\n\t\t\t\turl: 'wss://niushop.yulongtianzi.com/ws',\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tconsole.log('WebSocket 连接成功');\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tconsole.log('WebSocket 连接失败');\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.socketTask.onOpen(() => {\n\t\t\t\tconst message = {\n\t\t\t\t\tuser_id: this.userInfo.member_id,\n\t\t\t\t\ttype: 'login',\n\t\t\t\t\troom_id: this.roomId,\n\t\t\t\t\tuser_name: this.userInfo.nickname,\n\t\t\t\t\tis_agent: this.isAgent\n\t\t\t\t};\n\t\t\t\tthis.socketTask.send({ data: JSON.stringify(message) });\n\t\t\t});\n\t\t\tthis.socketTask.onMessage((res) => {\n\t\t\t\tconst data = JSON.parse(res.data);\n\t\t\t\tswitch (data.type) {\n\t\t\t\t\tcase 'login':\n\t\t\t\t\t\tconst message = {\n\t\t\t\t\t\t\tuser_id: this.userInfo.member_id,\n\t\t\t\t\t\t\ttype: 'bild',\n\t\t\t\t\t\t\troom_id: this.roomId,\n\t\t\t\t\t\t\tuser_name: this.userInfo.nickname,\n\t\t\t\t\t\t\tis_agent: this.isAgent\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.socketTask.send({ data: JSON.stringify(message) });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'say':\n\t\t\t\t\t\tthis.messages.push({ ...data, is_me: 0 });\n\t\t\t\t\t\tthis.count++;\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'save':\n\t\t\t\t\t\tthis.saveMessage(data);\n\t\t\t\t\t\tthis.messages.push({ ...data, is_me: 1 });\n\t\t\t\t\t\tif (!data.isonline && !data.is_agent) {\n\t\t\t\t\t\t\tthis.isRobot = true;\n\t\t\t\t\t\t\tthis.animationBuffer = '';\n\t\t\t\t\t\t\tif (this.animationTimer) {\n\t\t\t\t\t\t\t\tclearInterval(this.animationTimer);\n\t\t\t\t\t\t\t\tthis.animationTimer = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.isFinished = false;\n\t\t\t\t\t\t\tthis.lastChunkContent = '';\n\t\t\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\tis_me: 0,\n\t\t\t\t\t\t\t\tis_agent: 1,\n\t\t\t\t\t\t\t\tfriend_name: this.userInfo.nickname,\n\t\t\t\t\t\t\t\tto_friend_id: data.user_id,\n\t\t\t\t\t\t\t\tuser_id: data.to_friend_id,\n\t\t\t\t\t\t\t\tcontent: ''\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.messageIndex = this.messages.length - 1;\n\t\t\t\t\t\t\tthis.count += 2;\n\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t\tconst content = data.is_mold === 5 ? data.content.url : data.content;\n\t\t\t\t\t\t\tthis.getAIResponse(content);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.count++;\n\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t\tthis.isRobot = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconsole.log('WebSocket 收到消息:', res.data);\n\t\t\t});\n\t\t\tthis.socketTask.onError((err) => {\n\t\t\t\tconsole.log('WebSocket 发生错误:', err);\n\t\t\t});\n\t\t\t// 监听 WebSocket 关闭事件\n\t\t\tthis.socketTask.onClose(() => {\n\t\t\t\tconsole.log('WebSocket 连接关闭');\n\t\t\t\tthis.initSocket();\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n.chat-page {\n\theight: 100vh;\n\tbackground-color: $uni-bg-color;\n\t.chat-title {\n\t\tmargin-left: 100rpx;\n\t}\n\t.chat-icon {\n\t\twidth: 64rpx;\n\t\theight: 64rpx;\n\t}\n\t.strategy-container {\n\t\tflex: none;\n\t\theight: 80rpx;\n\t\tpadding: 0 32rpx;\n\t\tborder-bottom: 2rpx solid $uni-text-color-gray4;\n\t}\n\t.strategy-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t}\n\t.message-container {\n\t\twidth: auto;\n\t\tpadding: 32rpx 24rpx 0 24rpx;\n\t\toverflow: auto;\n\t}\n\t.message-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 24rpx;\n\t}\n\t.message-item:last-child {\n\t\tmargin-bottom: 24rpx;\n\t}\n\t.message-time {\n\t\tmargin: 8rpx 0 20rpx 0;\n\t\ttext-align: center;\n\t}\n\t.user-avatar {\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tborder-radius: 50%;\n\t}\n\t.message-dialog {\n\t\tmax-width: 510rpx;\n\t\tmargin: auto;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 16rpx 24rpx;\n\t\tbackground-color: $uni-color-accent1;\n\t}\n\t.message-dialog.friend {\n\t\tbackground-color: #fff;\n\t}\n\t.message-content {\n\t\tfont-size: 32rpx;\n\t\tline-height: 44rpx;\n\t\tcolor: $uni-text-color;\n\t\twhite-space: pre-line;\n\t\tword-break: break-all;\n\t\ttext-align: justify;\n\t}\n\t.message-content.loading {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t}\n\n\t.message-content.loading:before {\n\t\tflex: none;\n\t\tdisplay: block;\n\t\tcontent: '';\n\t\twidth: 44rpx;\n\t\theight: 44rpx;\n\t\tborder-radius: 50%;\n\t\tborder: 4rpx solid $uni-text-color-gray4;\n\t\tborder-top: 4rpx solid $uni-text-color-gray1;\n\t\tanimation: spin 1s linear infinite;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.message-content.loading::after {\n\t\tcontent: '阿济正在努力思考中，可能需要几分钟';\n\t\tfont-size: 32rpx;\n\t\tcolor: $uni-text-color;\n\t\tline-height: 44rpx;\n\t}\n\n\t.message-content text {\n\t\tdisplay: none;\n\t}\n\n\t@keyframes spin {\n\t\t0% {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t.message-image {\n\t\twidth: 240rpx;\n\t\tborder-radius: 16rpx;\n\t}\n\t.message-video {\n\t\twidth: 510rpx;\n\t\theight: 284rpx;\n\t\tborder-radius: 16rpx;\n\t\toverflow: hidden;\n\t}\n\t.survey-message {\n\t\twidth: 510rpx;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 16rpx 24rpx 0 24rpx;\n\t}\n\t.survey-description {\n\t\tflex: 1;\n\t}\n\t.survey-description .text {\n\t\tdisplay: inline;\n\t}\n\t.survey-cover {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tbackground-color: $uni-bg-color-2;\n\t}\n\t.survey-type {\n\t\twidth: 100%;\n\t\theight: 64rpx;\n\t\tborder-top: 2rpx solid $uni-text-color-gray4;\n\t}\n\t.message-voice {\n\t\tpadding-left: 60rpx;\n\t\t.icon {\n\t\t\ttransform: rotate(180deg);\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1754656928289\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}