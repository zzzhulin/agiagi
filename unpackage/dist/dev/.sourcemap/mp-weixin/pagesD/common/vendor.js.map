{"version":3,"sources":["uni-app:///mixins/cart.js","uni-app:///services/cart.js"],"names":["data","goodsList","counts","loaded","selected","selectAll","loadingCart","computed","totalPrice","reduce","acc","g","idx","price","toFixed","methods","navigateTo","url","uni","initCart","userId","text","fetchRecommendedProducts","recs","ids","map","r","product","id","qtys","recommended_quantity","fetchGoodsSkuPage","skuList","fetchCartList","cart","Promise","all","sku","i","some","ci","sku_id","addCartItem","resolve","length","item","info","find","s","num","showToast","title","message","icon","toggleSelect","$set","every","v","toggleSelectAll","flag","changeCount","type","cur","showModal","content","success","res","confirm","removeCartItem","cart_id","splice","next","Math","min","stock","updateCartItem","checkout","chosen","filter","Boolean","join","redirectTo","reject","request","user_id","isRobot","recommended_products","fail","err","goodsIdArr","method","goods_id_arr","list"],"mappings":"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","file":"pagesD/common/vendor.js","sourcesContent":["// src/mixins/cartMixin.js\r\nimport {\r\n\tfetchRecommendedProducts,\r\n\tfetchGoodsSkuPage,\r\n\tfetchCartList,\r\n\taddCartItem,\r\n\tupdateCartItem,\r\n\tremoveCartItem\r\n} from '@/services/cart';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tgoodsList: [],\r\n\t\t\tcounts: [],\r\n\t\t\tloaded: false,\r\n\t\t\tselected: [],\r\n\t\t\tselectAll: false,\r\n\t\t\tloadingCart: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\ttotalPrice() {\r\n\t\t\treturn this.goodsList\r\n\t\t\t\t.reduce((acc, g, idx) =>\r\n\t\t\t\t\tthis.selected[idx] ? acc + g.price * this.counts[idx] : acc, 0)\r\n\t\t\t\t.toFixed(2);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tnavigateTo(url) {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl\r\n\t\t\t})\r\n\t\t},\r\n\t\tasync initCart(userId, text) {\r\n\t\t\tthis.loadingCart = true;\r\n\t\t\ttry {\r\n\t\t\t\t// 1. 推荐列表\r\n\t\t\t\tconst recs = await fetchRecommendedProducts(userId, text);\r\n\t\t\t\tconst ids = recs.map(r => r.product.id);\r\n\t\t\t\tconst qtys = recs.map(r => r.recommended_quantity || 1);\r\n\r\n\t\t\t\t// 2. 拿 SKU 详情\r\n\t\t\t\tconst skuList = await fetchGoodsSkuPage(ids);\r\n\r\n\t\t\t\t// 3. 现有购物车\r\n\t\t\t\tlet cart = await fetchCartList();\r\n\r\n\t\t\t\t// 4. 补缺失项\r\n\t\t\t\tawait Promise.all(\r\n\t\t\t\t\tskuList.map((sku, i) => {\r\n\t\t\t\t\t\tif (!cart.some(ci => ci.sku_id === sku.sku_id)) {\r\n\t\t\t\t\t\t\treturn addCartItem(sku.sku_id, qtys[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// 5. 重新拉购物车\r\n\t\t\t\tif (!cart.length) {\r\n\t\t\t\t\tcart = await fetchCartList();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 6. 合并并赋值\r\n\t\t\t\tthis.goodsList = cart.map(item => {\r\n\t\t\t\t\tconst info = skuList.find(s => s.sku_id === item.sku_id) || {};\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t...info\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\tthis.counts = this.goodsList.map(i => i.num || 1);\r\n\t\t\t\tthis.selected = this.goodsList.map(() => false);\r\n\t\t\t\tthis.selectAll = false;\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t} catch (err) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: err.message || '购物车加载失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loadingCart = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttoggleSelect(idx) {\r\n\t\t\tthis.$set(this.selected, idx, !this.selected[idx]);\r\n\t\t\tthis.selectAll = this.selected.every(v => v);\r\n\t\t},\r\n\r\n\t\ttoggleSelectAll() {\r\n\t\t\tconst flag = !this.selectAll;\r\n\t\t\tthis.selectAll = flag;\r\n\t\t\tthis.selected = this.goodsList.map(() => flag);\r\n\t\t},\r\n\r\n\t\tasync changeCount(type, idx) {\r\n\t\t\tconst item = this.goodsList[idx];\r\n\t\t\tconst cur = this.counts[idx];\r\n\t\t\tlet next;\r\n\r\n\t\t\tif (type === 'minus') {\r\n\t\t\t\tif (cur === 1) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '确定删除该商品吗',\r\n\t\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tawait removeCartItem(item.cart_id);\r\n\t\t\t\t\t\t\t\tthis.goodsList.splice(idx, 1);\r\n\t\t\t\t\t\t\t\tthis.counts.splice(idx, 1);\r\n\t\t\t\t\t\t\t\tthis.selected.splice(idx, 1);\r\n\t\t\t\t\t\t\t\tthis.selectAll = this.selected.every(v => v);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnext = cur - 1;\r\n\t\t\t} else {\r\n\t\t\t\tnext = Math.min(cur + 1, item.stock || 1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.$set(this.counts, idx, next);\r\n\t\t\tawait updateCartItem(item.cart_id, next);\r\n\t\t},\r\n\r\n\t\tcheckout() {\r\n\t\t\tconst chosen = this.selected\r\n\t\t\t\t.map((v, i) => (v ? this.goodsList[i].cart_id : null))\r\n\t\t\t\t.filter(Boolean)\r\n\t\t\t\t.join(',');\r\n\t\t\tif (!chosen) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先选择商品',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl: `/pagesD/settlement/settlement?cartIds=${chosen}`\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};","// src/services/cart.js\r\nimport {\r\n\trequest\r\n} from '@/utils/request';\r\n\r\nexport function fetchRecommendedProducts(userId, text) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\trequest({\r\n\t\t\turl: '/api/v2/product-ai-recommend/recommended',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: userId,\r\n\t\t\t\ttext\r\n\t\t\t},\r\n\t\t\tisRobot: true,\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tif (res && res.recommended_products) {\r\n\t\t\t\t\tresolve(res.recommended_products);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve([]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: err => reject(err)\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function fetchGoodsSkuPage(goodsIdArr) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\trequest({\r\n\t\t\turl: '/api/Goodssku/page',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tgoods_id_arr: goodsIdArr\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tresolve(res && res.list ? res.list : []);\r\n\t\t\t},\r\n\t\t\tfail: err => reject(err)\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function fetchCartList() {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\trequest({\r\n\t\t\turl: '/api/cart/goodsLists',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tsuccess: res => resolve(res || []),\r\n\t\t\tfail: err => reject(err)\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function addCartItem(sku_id, num) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\trequest({\r\n\t\t\turl: '/api/cart/add',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tsku_id,\r\n\t\t\t\tnum\r\n\t\t\t},\r\n\t\t\tsuccess: resolve,\r\n\t\t\tfail: reject\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function updateCartItem(cart_id, num) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\trequest({\r\n\t\t\turl: '/api/cart/edit',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tcart_id,\r\n\t\t\t\tnum\r\n\t\t\t},\r\n\t\t\tsuccess: resolve,\r\n\t\t\tfail: reject\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function removeCartItem(cart_id) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\trequest({\r\n\t\t\turl: '/api/cart/delete',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tcart_id\r\n\t\t\t},\r\n\t\t\tsuccess: resolve,\r\n\t\t\tfail: reject\r\n\t\t});\r\n\t});\r\n}"],"sourceRoot":""}