{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesA/survey/diet.vue?d352","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesA/survey/diet.vue?5b8b","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesA/survey/diet.vue?7493","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesA/survey/diet.vue?1fcf","uni-app:///pagesA/survey/diet.vue","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesA/survey/diet.vue?65ab","webpack:////Users/zhulin/Documents/HBuilderProjects/AI/pagesA/survey/diet.vue?1ec3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","align","notificationId","templateId","answer","oldAnswer","top","current","editingIndex","loaded","showEdit","showInput","isEdit","answers","surveys","questions","order","onLoad","onUnload","console","computed","methods","toggleInput","openPopup","setText","radioChange","checkboxChange","onAnalysis","uni","title","mask","url","method","member_id","user_id","tenant_id","notification_id","template_id","survey_data","basic_data","isRobot","success","complete","redirectTo","onLineChange","onEdit","onLongTap","query","select","boundingClientRect","exec","onAnswer","icon","inputLetters","selectedAnswers","setTimeout","question","data_tag","scrollTop","duration","getQuestions"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/EA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC+Ft1B;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;EACA;EACAC,4BACA,yDACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACAC;QACAC;QACAC;MACA;MACA;QACAC;QACAC;QACAhC;UACAiC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;YAAA;UAAA;QACA;QACAC;QACAC;UACA;YACA;UACA;QACA;QACAC;UACAd;QACA;MACA;IACA;IACAe;MACAf;QACAG;MACA;IACA;IACAa;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACAC,MACAC,0BACAC;QACA9B;MACA,GACA+B;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAvB;UACAC;UACAuB;QACA;QACA;MACA;MACA;MACA;QACA;QACA;UACA;YACA;YACA;cACAC;gBAAA;cAAA;YACA;cACAA;YACA;YACA;YAAA,2CACAA;cAAA;YAAA;cAAA;gBAAA;gBACA;gBACA;kBACAzB;oBACAC;oBACAuB;kBACA;kBACA;gBACA;gBACA;kBACAE;gBACA;cACA;YAAA;cAAA;YAAA;cAAA;YAAA;YACA;UACA;YACA;YACA;YACA;cACA1B;gBACAC;gBACAuB;cACA;cACA;YACA;YACA;UACA;QACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;MACA;QACA;UACAxB;YACAC;YACAuB;UACA;UACA;QACA;QACA;UACA;UACA;YACAC;cAAA;YAAA;UACA;YACAA;UACA;UACA;UAAA,4CACAA;YAAA;UAAA;YAAA;cAAA;cACA;cACA;gBACAzB;kBACAC;kBACAuB;gBACA;gBACA;cACA;cACA;gBACAE;cACA;YACA;UAAA;YAAA;UAAA;YAAA;UAAA;UACA;QACA;UACA;UACA;UACA;YACA1B;cACAC;cACAuB;YACA;YACA;UACA;UACA;QACA;MACA;QACA;MACA;MACA;MACA;MACAG;QACA;QACA;UACA;YACAC;YACApD;YACAqD;UACA;QACA;QACA;UACA7B;YACA8B;YACAC;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAhC;QACAC;QACAC;MACA;MACA;QACAC;QACAC;QACAQ;QACAC;UACA;YACA;YACA;YACA;YACA;cACAe;cACApD;cACAqD;YACA;UACA;QACA;QACAf;UACAd;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9VA;AAAA;AAAA;AAAA;AAAiiD,CAAgB,i6CAAG,EAAC,C;;;;;;;;;;;ACArjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesA/survey/diet.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesA/survey/diet.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./diet.vue?vue&type=template&id=01b683f6&\"\nvar renderjs\nimport script from \"./diet.vue?vue&type=script&lang=js&\"\nexport * from \"./diet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./diet.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesA/survey/diet.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./diet.vue?vue&type=template&id=01b683f6&\"","var components\ntry {\n  components = {\n    Flexbox: function () {\n      return import(\n        /* webpackChunkName: \"components/Flexbox/Flexbox\" */ \"@/components/Flexbox/Flexbox.vue\"\n      )\n    },\n    Navbar: function () {\n      return import(\n        /* webpackChunkName: \"components/Navbar/Navbar\" */ \"@/components/Navbar/Navbar.vue\"\n      )\n    },\n    Typography: function () {\n      return import(\n        /* webpackChunkName: \"components/Typography/Typography\" */ \"@/components/Typography/Typography.vue\"\n      )\n    },\n    Icon: function () {\n      return import(\n        /* webpackChunkName: \"components/Icon/Icon\" */ \"@/components/Icon/Icon.vue\"\n      )\n    },\n    Speech: function () {\n      return import(\n        /* webpackChunkName: \"components/Speech/Speech\" */ \"@/components/Speech/Speech.vue\"\n      )\n    },\n    Login: function () {\n      return import(\n        /* webpackChunkName: \"components/Login/Login\" */ \"@/components/Login/Login.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.questions.length\n  var g1 = _vm.current === _vm.questions.length && _vm.loaded\n  var g2 =\n    !g1 && (_vm.showInput || _vm.answer)\n      ? _vm.current === _vm.questions.length && _vm.loaded\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showEdit = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./diet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./diet.vue?vue&type=script&lang=js&\"","<template>\n\t<Flexbox direction=\"column\" gap=\"16\" className=\"survey-diet-page\">\n\t\t<Navbar title=\"膳食调查\"></Navbar>\n\t\t<Flexbox align=\"left\" className=\"banner-container\">\n\t\t\t<Flexbox direction=\"column\" className=\"full-width\">\n\t\t\t\t<Typography color=\"gray2\">请使用文字或语音回复，</Typography>\n\t\t\t\t<Typography color=\"gray2\">共{{ questions.length }}个问题，</Typography>\n\t\t\t\t<Typography color=\"gray2\">用时约3分钟</Typography>\n\t\t\t</Flexbox>\n\t\t\t<Icon src=\"meal.png\" width=\"186\" height=\"111\" className=\"banner-image\"></Icon>\n\t\t</Flexbox>\n\t\t<Flexbox direction=\"column\" gap=\"16\" className=\"survey-list\">\n\t\t\t<Flexbox direction=\"column\" gap=\"16\" className=\"survey-item\" v-for=\"(survey, surveyIndex) in surveys\" :key=\"surveyIndex\">\n\t\t\t\t<Flexbox direction=\"column\" gap=\"16\" className=\"question-content\">\n\t\t\t\t\t<Typography fontSize=\"16\" :bold=\"true\">{{ survey.question }}</Typography>\n\t\t\t\t\t<Flexbox direction=\"column\" gap=\"8\" v-if=\"questions[surveyIndex].type !== 'fill'\">\n\t\t\t\t\t\t<template v-if=\"questions[surveyIndex].type === 'select'\">\n\t\t\t\t\t\t\t<radio-group @change=\"radioChange\">\n\t\t\t\t\t\t\t\t<label v-for=\"(option, optionIndex) in questions[surveyIndex].options\" :key=\"optionIndex\" class=\"option-item\">\n\t\t\t\t\t\t\t\t\t<radio\n\t\t\t\t\t\t\t\t\t\t:value=\"order[optionIndex]\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"isEdit ? editingIndex !== surveyIndex : current !== surveyIndex\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"#30A375\"\n\t\t\t\t\t\t\t\t\t\tstyle=\"transform: scale(0.7)\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Typography>{{ order[optionIndex] }}.&nbsp;{{ option }}</Typography>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</radio-group>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"questions[surveyIndex].type === 'multi-select'\">\n\t\t\t\t\t\t\t<checkbox-group @change=\"checkboxChange\">\n\t\t\t\t\t\t\t\t<label v-for=\"(option, optionIndex) in questions[surveyIndex].options\" :key=\"optionIndex\" class=\"option-item\">\n\t\t\t\t\t\t\t\t\t<checkbox\n\t\t\t\t\t\t\t\t\t\t:value=\"order[optionIndex]\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"isEdit ? editingIndex !== surveyIndex : current !== surveyIndex\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"#30A375\"\n\t\t\t\t\t\t\t\t\t\tstyle=\"transform: scale(0.7)\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Typography>{{ order[optionIndex] }}.&nbsp;{{ option }}</Typography>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</checkbox-group>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Flexbox>\n\t\t\t\t</Flexbox>\n\t\t\t\t<Flexbox className=\"answer-content\" v-if=\"answers[surveyIndex]\" @longpress=\"onLongTap($event, surveyIndex, answers[surveyIndex])\">\n\t\t\t\t\t<Typography fontSize=\"16\">{{ answers[surveyIndex] }}</Typography>\n\t\t\t\t</Flexbox>\n\t\t\t</Flexbox>\n\t\t</Flexbox>\n\t\t<Flexbox align=\"center\" direction=\"column\" gap=\"8\" className=\"analysis-container\" v-if=\"current === questions.length && loaded\">\n\t\t\t<Typography fontSize=\"16\" color=\"#000000\">本次调查评估已结束，如需修改，请长按你的答案。</Typography>\n\t\t\t<Flexbox align=\"center\" className=\"analysis-btn\" @tap=\"onAnalysis\">\n\t\t\t\t<Typography fontSize=\"16\" color=\"white\" :bold=\"true\">直接生成分析报告</Typography>\n\t\t\t</Flexbox>\n\t\t</Flexbox>\n\t\t<Flexbox align=\"center\" className=\"tabbar-container\" v-else>\n\t\t\t<Flexbox direction=\"column\" gap=\"12\" :className=\"['tabbar-content', { editing: isEdit }]\">\n\t\t\t\t<Flexbox align=\"left\" className=\"old-answer\" v-if=\"isEdit\">\n\t\t\t\t\t<Typography color=\"gray2\">修改：{{ oldAnswer }}</Typography>\n\t\t\t\t</Flexbox>\n\t\t\t\t<Flexbox :align=\"align\">\n\t\t\t\t\t<Icon src=\"icon_keyboard.png\" size=\"24\" v-if=\"!showInput && !answer\" @tap=\"toggleInput(true)\"></Icon>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tv-if=\"showInput || answer\"\n\t\t\t\t\t\tv-model=\"answer\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:auto-height=\"true\"\n\t\t\t\t\t\t:show-confirm-bar=\"false\"\n\t\t\t\t\t\t:disable-default-padding=\"true\"\n\t\t\t\t\t\t:disabled=\"current === questions.length && loaded\"\n\t\t\t\t\t\tcursor-spacing=\"20\"\n\t\t\t\t\t\tclass=\"answer-input\"\n\t\t\t\t\t\tplaceholder=\"输入答案...\"\n\t\t\t\t\t\tconfirm-type=\"send\"\n\t\t\t\t\t\t@linechange=\"onLineChange\"\n\t\t\t\t\t\t@confirm=\"onAnswer\"\n\t\t\t\t\t></textarea>\n\t\t\t\t\t<Typography fontSize=\"16\" color=\"gray2\" align=\"center\" className=\"answer-input\" v-else @tap=\"openPopup\">点击说话</Typography>\n\t\t\t\t\t<Icon src=\"icon_send.png\" size=\"24\" v-if=\"answer\" @tap=\"onAnswer\"></Icon>\n\t\t\t\t\t<Icon src=\"icon_microphone.png\" size=\"24\" v-if=\"showInput && !answer\" @tap=\"toggleInput(false)\"></Icon>\n\t\t\t\t</Flexbox>\n\t\t\t</Flexbox>\n\t\t</Flexbox>\n\t\t<view class=\"edit-popup\" v-if=\"showEdit\">\n\t\t\t<view class=\"popup-mask\" @tap=\"showEdit = false\"></view>\n\t\t\t<Flexbox align=\"center\" className=\"popup-content\" :style=\"{ top: `${top * 2}rpx` }\" @tap=\"onEdit\">\n\t\t\t\t<Icon src=\"icon_edit.png\" size=\"20\" gap=\"12\" align=\"center\" label=\"修改\" fontSize=\"16\" color=\"#000000\"></Icon>\n\t\t\t</Flexbox>\n\t\t</view>\n\t\t<Speech ref=\"speechPopup\" @confirm=\"setText\"></Speech>\n\t\t<Login></Login>\n\t</Flexbox>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { request } from '@/utils/request';\nimport { map, omit } from 'lodash';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\talign: 'center',\n\t\t\tnotificationId: 0,\n\t\t\ttemplateId: '',\n\t\t\tanswer: '',\n\t\t\toldAnswer: '',\n\t\t\ttop: 0,\n\t\t\tcurrent: 0,\n\t\t\teditingIndex: -1,\n\t\t\tloaded: false,\n\t\t\tshowEdit: false,\n\t\t\tshowInput: false,\n\t\t\tisEdit: false,\n\t\t\tanswers: [],\n\t\t\tsurveys: [],\n\t\t\tquestions: [],\n\t\t\torder: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K']\n\t\t};\n\t},\n\tonLoad() {\n\t\tthis.getQuestions();\n\t},\n\tonUnload() {\n\t\tthis.loaded = false;\n\t\tconsole.log('膳食调查页面卸载');\n\t},\n\tcomputed: {\n\t\t...mapState(['userInfo', 'member', 'basicInfo'])\n\t},\n\tmethods: {\n\t\ttoggleInput(flag) {\n\t\t\tthis.showInput = flag;\n\t\t},\n\t\topenPopup() {\n\t\t\tthis.$refs.speechPopup.open();\n\t\t},\n\t\tsetText(text) {\n\t\t\tthis.answer += text;\n\t\t},\n\t\tradioChange(e) {\n\t\t\tthis.answer = e.detail.value;\n\t\t},\n\t\tcheckboxChange(e) {\n\t\t\tthis.answer = e.detail.value.join(',');\n\t\t},\n\t\tonAnalysis() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '开始分析...',\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\trequest({\n\t\t\t\turl: '/api/v2/survey/diet-survey/analyze',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tmember_id: this.member.member_id,\n\t\t\t\t\tuser_id: this.userInfo.member_id,\n\t\t\t\t\ttenant_id: this.userInfo.card_info.first_agent_id,\n\t\t\t\t\tnotification_id: this.notificationId,\n\t\t\t\t\ttemplate_id: this.templateId,\n\t\t\t\t\tsurvey_data: this.surveys,\n\t\t\t\t\tbasic_data: map(this.basicInfo, item => omit(item,  ['type', 'options']))\n\t\t\t\t},\n\t\t\t\tisRobot: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.redirectTo('/pagesA/report/diet');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tredirectTo(url) {\n\t\t\tuni.redirectTo({\n\t\t\t\turl\n\t\t\t});\n\t\t},\n\t\tonLineChange(event) {\n\t\t\tthis.align = event.detail.lineCount > 1 ? 'end' : 'center';\n\t\t},\n\t\tonEdit() {\n\t\t\tthis.showEdit = false;\n\t\t\tthis.isEdit = true;\n\t\t},\n\t\tonLongTap(event, surveyIndex, answer) {\n\t\t\tconst query = uni.createSelectorQuery().in(this);\n\t\t\tquery\n\t\t\t\t.select('.answer-content')\n\t\t\t\t.boundingClientRect((data) => {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t})\n\t\t\t\t.exec();\n\t\t\tthis.top = event.y - 40 - 38 + 19;\n\t\t\tthis.showEdit = true;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.editingIndex = surveyIndex;\n\t\t\tthis.oldAnswer = answer;\n\t\t},\n\t\tonAnswer() {\n\t\t\tconst answerInput = this.answer.trim();\n\t\t\tif (!answerInput) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入答案',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 编辑模式下替换答案\n\t\t\tif (this.isEdit && this.editingIndex !== -1) {\n\t\t\t\tconst question = this.questions[this.editingIndex];\n\t\t\t\tif (question.type !== 'fill') {\n\t\t\t\t\tif (question.type === 'multi-select') {\n\t\t\t\t\t\tlet inputLetters = [];\n\t\t\t\t\t\tif (answerInput.includes(',') || answerInput.includes('，')) {\n\t\t\t\t\t\t\tinputLetters = answerInput.split(/,|，/).map((item) => item.trim().toUpperCase());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinputLetters = answerInput.toUpperCase().split('');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet selectedAnswers = [];\n\t\t\t\t\t\tfor (let letter of inputLetters) {\n\t\t\t\t\t\t\tconst index = this.order.indexOf(letter);\n\t\t\t\t\t\t\tif (index === -1 || index >= question.options.length) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '请输入正确的答案序号',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!selectedAnswers.includes(question.options[index])) {\n\t\t\t\t\t\t\t\tselectedAnswers.push(question.options[index]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.surveys[this.editingIndex].answer = selectedAnswers;\n\t\t\t\t\t} else if (question.type === 'select') {\n\t\t\t\t\t\tconst letter = answerInput.toUpperCase();\n\t\t\t\t\t\tconst index = this.order.indexOf(letter);\n\t\t\t\t\t\tif (index === -1 || index >= question.options.length) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请输入正确的答案序号',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.surveys[this.editingIndex].answer = question.options[index];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.surveys[this.editingIndex].answer = answerInput;\n\t\t\t\t}\n\t\t\t\tthis.answers[this.editingIndex] = answerInput;\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.editingIndex = -1;\n\t\t\t\tthis.answer = '';\n\t\t\t\tthis.showEdit = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 非编辑状态下原有逻辑\n\t\t\tconst question = this.questions[this.current];\n\t\t\tif (question.type !== 'fill') {\n\t\t\t\tif (!answerInput) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请输入答案序号',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (question.type === 'multi-select') {\n\t\t\t\t\tlet inputLetters = [];\n\t\t\t\t\tif (answerInput.includes(',') || answerInput.includes('，')) {\n\t\t\t\t\t\tinputLetters = answerInput.split(/,|，/).map((item) => item.trim().toUpperCase());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinputLetters = answerInput.toUpperCase().split('');\n\t\t\t\t\t}\n\t\t\t\t\tlet selectedAnswers = [];\n\t\t\t\t\tfor (let letter of inputLetters) {\n\t\t\t\t\t\tconst index = this.order.indexOf(letter);\n\t\t\t\t\t\tif (index === -1 || index >= question.options.length) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请输入正确的答案序号',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!selectedAnswers.includes(question.options[index])) {\n\t\t\t\t\t\t\tselectedAnswers.push(question.options[index]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.surveys[this.current].answer = selectedAnswers;\n\t\t\t\t} else if (question.type === 'select') {\n\t\t\t\t\tconst letter = answerInput.toUpperCase();\n\t\t\t\t\tconst index = this.order.indexOf(letter);\n\t\t\t\t\tif (index === -1 || index >= question.options.length) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '请输入正确的答案序号',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.surveys[this.current].answer = question.options[index];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.surveys[this.current].answer = answerInput;\n\t\t\t}\n\t\t\tthis.answers[this.current] = answerInput;\n\t\t\tthis.answer = '';\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.current++;\n\t\t\t\tif (this.current < this.questions.length) {\n\t\t\t\t\tthis.surveys.push({\n\t\t\t\t\t\tquestion: this.questions[this.current].question,\n\t\t\t\t\t\tanswer: this.questions[this.current].type === 'multi-select' ? [] : '',\n\t\t\t\t\t\tdata_tag: this.questions[this.current].data_tag\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\tscrollTop: 9999,\n\t\t\t\t\t\tduration: 300\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\tgetQuestions() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '正在加载...',\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\trequest({\n\t\t\t\turl: `/api/v2/survey/diet-survey/template?member_id=${this.member.member_id}&user_id=${this.userInfo.member_id}&notification_id=${this.notificationId}&tenant_id=${this.userInfo.card_info.first_agent_id}`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tisRobot: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res && res.template_id) {\n\t\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\t\tthis.templateId = res.template_id;\n\t\t\t\t\t\tthis.questions = res.template_data;\n\t\t\t\t\t\tthis.surveys.push({\n\t\t\t\t\t\t\tquestion: res.template_data[0].question,\n\t\t\t\t\t\t\tanswer: res.template_data[0].type === 'multi-select' ? [] : '',\n\t\t\t\t\t\t\tdata_tag: res.template_data[0].data_tag\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n.survey-diet-page {\n\tmin-height: 100vh;\n\tpadding: 0 32rpx 516rpx 32rpx;\n\tbackground-color: #fff;\n\n\t.banner-container {\n\t\tposition: relative;\n\t\tbackground-color: $uni-bg-color-2;\n\t\tborder-radius: 24rpx;\n\t\tpadding-left: 22rpx;\n\t\theight: 242rpx;\n\t}\n\n\t.banner-image {\n\t\tposition: absolute;\n\t\tright: 20rpx;\n\t\tbottom: 0;\n\t}\n\n\t.question-content {\n\t\twidth: fit-content;\n\t\tpadding: 24rpx;\n\t\tborder-radius: 24rpx;\n\t\tbackground-color: $uni-bg-color-2;\n\t}\n\n\t.answer-content {\n\t\twidth: fit-content;\n\t\tpadding: 16rpx 24rpx;\n\t\tmargin-left: auto;\n\t\tborder-radius: 16rpx;\n\t\tbackground-color: $uni-color-accent1;\n\t}\n\n\t.analysis-container {\n\t\tposition: fixed;\n\t\tbottom: env(safe-area-inset-bottom);\n\t\twidth: 686rpx;\n\t\theight: 240rpx;\n\t\tpadding: 32rpx;\n\t\tmargin: 0 auto;\n\t\tborder-radius: 24rpx;\n\t\tbackground-color: $uni-bg-color-2;\n\t\tbox-shadow: 0 0 0 2rpx $uni-text-color-gray2 inset;\n\t\tz-index: 9999;\n\t}\n\n\t.analysis-btn {\n\t\twidth: 432rpx;\n\t\theight: 72rpx;\n\t\tborder-radius: 44rpx;\n\t\tbackground-color: $uni-color-primary;\n\t}\n\n\t.tabbar-container {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tpadding: 16rpx 32rpx env(safe-area-inset-bottom) 32rpx;\n\t\tbackground-color: $uni-bg-color;\n\t}\n\n\t.tabbar-content {\n\t\twidth: 100%;\n\t\tpadding: 22rpx 32rpx;\n\t\tborder-radius: 48rpx;\n\t\tbox-shadow: 0rpx 4rpx 20rpx 0rpx #0000001a;\n\t\tbackground-color: #fff;\n\t}\n\n\t.tabbar-content.editing {\n\t\tpadding: 0 24rpx 24rpx 24rpx;\n\t\tborder-radius: 24rpx;\n\t}\n\n\t.answer-input {\n\t\tflex: 1;\n\t}\n\n\t.old-answer {\n\t\theight: 80rpx;\n\t\tborder-bottom: 2rpx solid $uni-border-color;\n\t}\n\n\tcheckbox-group,\n\tradio-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 10rpx;\n\t}\n\n\tlabel {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.popup-content {\n\t\tposition: absolute;\n\t\tright: 34rpx;\n\t\twidth: 200rpx;\n\t\theight: 80rpx;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 16rpx;\n\t}\n\n\t.popup-mask {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\n\t}\n\n\t.speech-btn {\n\t\tposition: relative;\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 50%;\n\t\tbackground-color: $uni-color-primary;\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./diet.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./diet.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1754572667229\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}